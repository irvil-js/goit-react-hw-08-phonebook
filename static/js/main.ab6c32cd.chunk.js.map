{"version":3,"sources":["redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","components/Navigation/Navigation.js","components/AuthNavigation/AuthNavigation.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/phonebook/phonebook-reducer.js","redux/store.js","index.js","components/UserMenu/UserMenu.module.css","components/Navigation/Navigation.module.css","components/AuthNavigation/AuthNavigation.module.css","components/Loader/Loader.js","components/AppBar/AppBar.module.css","redux/phonebook/phonebook-actions.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","options","thunkAPI","a","post","response","data","error","status","toast","rejectWithValue","logIn","logOut","fetchCurrentUser","_","persistedToken","getState","auth","get","operations","authSelectors","getIsLoggedIn","state","isLoggedIn","getUserName","user","name","getInFetchingCurrent","isRefreshUser","authSlice","createSlice","initialState","email","extraReducers","authOperations","fulfilled","payload","rejected","pending","Navigation","useSelector","exact","to","activeClassName","styles","activeLink","className","link","AuthNavigation","UserMenu","dispatch","useDispatch","container","src","alt","width","avatar","button","type","onClick","exit","height","viewBox","xmlns","d","label","AppBar","header","PrivateRoute","children","redirectTo","routeProps","PublickRoute","restricted","shouldredirect","HomeView","lazy","PhonebookView","RegisterView","LoginView","NotFoundView","App","isRefreshing","useEffect","Container","fallback","Loader","path","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","items","createReducer","fetchContactSuccess","addContactSuccess","deleteContactSuccess","filter","id","loading","fetchContactRequest","fetchContactError","addContactRequest","addContactError","deleteContactRequest","deleteContactError","changeFilter","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","contactsPersistConfig","key","storage","blacklist","authPersistConfig","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","phonebookReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById","module","exports","onLoader","color","timeout","createAction"],"mappings":"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","file":"static/js/main.ab6c32cd.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-toastify';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk(\r\n  'auth/register',\r\n  async (options, thunkAPI) => {\r\n    try {\r\n      const response = await axios.post('/users/signup', options);\r\n      token.set(response.data.token);\r\n      return response.data;\r\n    } catch (err) {\r\n      let error = err; // cast the error for access\r\n      if (!error.response) {\r\n        throw err;\r\n      }\r\n      if (error.response.status === 400) {\r\n        toast.error('User creation error! Please try again!');\r\n      } else if (error.response.status === 500) {\r\n        toast.error('Oops! Server error! Please try later!');\r\n      } else {\r\n        toast.error('Something went wrong!');\r\n      }\r\n      // We got validation errors, let's return those so we can reference in our component and set form errors\r\n      return thunkAPI.rejectWithValue(error.response.data);\r\n    }\r\n  },\r\n);\r\nconst logIn = createAsyncThunk(\r\n  'auth/login',\r\n  async (options, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post('/users/login', options);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\nconst logOut = createAsyncThunk(\r\n  'auth/logout',\r\n  async (options, { rejectWithValue }) => {\r\n    try {\r\n      await axios.post('/users/logout', options);\r\n      token.unset();\r\n    } catch (error) {\r\n      rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const persistedToken = thunkAPI.getState().auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n\r\n      return data;\r\n    } catch (err) {\r\n      let error = err; // cast the error for access\r\n      if (!error.response) {\r\n        throw err;\r\n      }\r\n      if (error.response.status === 400) {\r\n        toast.error('User creation error! Please try again!');\r\n      } else if (error.response.status === 500) {\r\n        toast.error('Oops! Server error! Please try later!');\r\n      } else {\r\n        toast.error('Something went wrong!');\r\n      }\r\n      // We got validation errors, let's return those so we can reference in our component and set form errors\r\n      return thunkAPI.rejectWithValue(error.response.data);\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logIn,\r\n  logOut,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\nconst getUserName = state => state.auth.user.name;\r\nconst getInFetchingCurrent = state => state.auth.isRefreshUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUserName,\r\n  getInFetchingCurrent,\r\n};\r\n\r\nexport default authSelectors;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  // isRefreshUser: false,\r\n  error: null,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    // [authOperations.register.pending](state, { payload }) {\r\n    //   state.user = payload;\r\n    //   state.isLoggedIn = true;\r\n    //   state.isRefreshUser = false;\r\n    // },\r\n    [authOperations.register.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.register.rejected](state, { payload }) {\r\n      state.error = payload;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, { payload }) {\r\n      state.user = payload.user;\r\n      state.token = payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isRefreshUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, { payload }) {\r\n      state.user = payload;\r\n      state.isLoggedIn = true;\r\n      state.isRefreshUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isRefreshUser = false;\r\n    },\r\n  },\r\n});\r\nexport default authSlice.reducer;\r\n","import { NavLink } from 'react-router-dom';\r\n\r\nimport styles from './Navigation.module.css';\r\nimport { authSelectors } from 'redux/auth';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink\r\n        exact\r\n        to=\"/\"\r\n        activeClassName={styles.activeLink}\r\n        className={styles.link}\r\n      >\r\n        Home\r\n      </NavLink>\r\n      {isLoggedIn && (\r\n        <NavLink\r\n          to=\"/contact\"\r\n          activeClassName={styles.activeLink}\r\n          className={styles.link}\r\n        >\r\n          Contact\r\n        </NavLink>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\nexport default Navigation;\r\n","import { NavLink } from 'react-router-dom';\r\nimport styles from './AuthNavigation.module.css';\r\n\r\nconst AuthNavigation = () => {\r\n  return (\r\n    <nav>\r\n      <NavLink\r\n        to=\"/register\"\r\n        activeClassName={styles.activeLink}\r\n        className={styles.link}\r\n      >\r\n        Register\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        activeClassName={styles.activeLink}\r\n        className={styles.link}\r\n      >\r\n        Login\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n};\r\nexport default AuthNavigation;\r\n","import styles from './UserMenu.module.css';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\n\r\nconst UserMenu = () => {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUserName);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <img\r\n        src=\"https://www.flaticon.com/svg/static/icons/svg/763/763704.svg\"\r\n        alt=\"\"\r\n        width=\"32\"\r\n        className={styles.avatar}\r\n      />\r\n\r\n      <span className={styles.name}>Добро пожаловать, {name}!</span>\r\n\r\n      <button\r\n        className={styles.button}\r\n        type=\"button\"\r\n        onClick={() => dispatch(authOperations.logOut())}\r\n      >\r\n        <svg\r\n          className={styles.exit}\r\n          height=\"24\"\r\n          viewBox=\"0 0 512 512\"\r\n          width=\"32\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path d=\"m480.971 239.029-90.51-90.509a24 24 0 0 0 -33.942 0 24 24 0 0 0 0 33.941l49.54 49.539h-262.059a24 24 0 0 0 -24 24 24 24 0 0 0 24 24h262.059l-49.54 49.539a24 24 0 0 0 33.942 33.941l90.51-90.51a24 24 0 0 0 0-33.941z\" />\r\n          <path d=\"m304 392a24 24 0 0 0 -24 24v24h-208v-368h208v24a24 24 0 0 0 48 0v-32a40 40 0 0 0 -40-40h-224a40 40 0 0 0 -40 40v384a40 40 0 0 0 40 40h224a40 40 0 0 0 40-40v-32a24 24 0 0 0 -24-24z\" />\r\n        </svg>\r\n        <span className={styles.label}>Exit</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserMenu;\r\n","import { useSelector } from 'react-redux';\r\nimport Navigation from 'components/Navigation';\r\nimport AuthNav from 'components/AuthNavigation';\r\nimport UserMenu from 'components/UserMenu';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nimport styles from './AppBar.module.css';\r\n\r\nconst AppBar = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <header className={styles.header}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default AppBar;\r\n","import { useSelector } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function PublickRoute({\r\n  children,\r\n  redirectTo = '/',\r\n  restricted = false,\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldredirect = isLoggedIn && restricted;\r\n\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldredirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import { Switch } from 'react-router-dom';\r\nimport { lazy, Suspense, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { authOperations, authSelectors } from 'redux/auth';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Container } from '@material-ui/core';\r\nimport AppBar from 'components/AppBar';\r\nimport Loader from 'components/Loader';\r\nimport PrivateRoute from 'components/PrivateRoute';\r\nimport PublicRoute from 'components/PublicRoute';\r\n\r\nconst HomeView = lazy(() =>\r\n  import('views/HomeView' /* webpackChunkName: \"HomeView\" */),\r\n);\r\nconst PhonebookView = lazy(() =>\r\n  import('views/PhonebookView' /* webpackChunkName: \"PhonebookView\" */),\r\n);\r\nconst RegisterView = lazy(() =>\r\n  import('views/RegisterView' /* webpackChunkName: \"RegisterView\" */),\r\n);\r\nconst LoginView = lazy(() =>\r\n  import('views/LoginView' /* webpackChunkName: \"LoginView\" */),\r\n);\r\nconst NotFoundView = lazy(() =>\r\n  import('views/NotFoundView' /* webpackChunkName: \"NotFoundView\" */),\r\n);\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n  const isRefreshing = useSelector(authSelectors.getInFetchingCurrent);\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    !isRefreshing && (\r\n      <Container>\r\n        <AppBar />\r\n        <Suspense fallback={<Loader />}>\r\n          <Switch>\r\n            <PublicRoute path=\"/\" exact>\r\n              <HomeView />\r\n            </PublicRoute>\r\n\r\n            <PrivateRoute path=\"/contact\" exact redirectTo=\"/login\">\r\n              <PhonebookView />\r\n            </PrivateRoute>\r\n\r\n            <PublicRoute path=\"/register\" restricted>\r\n              <RegisterView />\r\n            </PublicRoute>\r\n\r\n            <PublicRoute path=\"/login\" restricted redirectTo=\"/contact\">\r\n              <LoginView />\r\n            </PublicRoute>\r\n\r\n            <PublicRoute>\r\n              <NotFoundView />\r\n            </PublicRoute>\r\n          </Switch>\r\n        </Suspense>\r\n        <ToastContainer\r\n          position=\"top-right\"\r\n          autoClose={3000}\r\n          hideProgressBar={false}\r\n          newestOnTop={false}\r\n          closeOnClick\r\n          rtl={false}\r\n          pauseOnFocusLoss\r\n          draggable\r\n          pauseOnHover\r\n        />\r\n      </Container>\r\n    )\r\n  );\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport {\r\n  fetchContactRequest,\r\n  fetchContactSuccess,\r\n  fetchContactError,\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactError,\r\n  deleteContactRequest,\r\n  deleteContactSuccess,\r\n  deleteContactError,\r\n  changeFilter,\r\n} from './phonebook-actions';\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactSuccess]: (_, { payload }) => payload,\r\n  [addContactSuccess]: (state, { payload }) => [payload, ...state],\r\n  [deleteContactSuccess]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContactRequest]: () => true,\r\n  [fetchContactSuccess]: () => false,\r\n  [fetchContactError]: () => false,\r\n\r\n  [addContactRequest]: () => true,\r\n  [addContactSuccess]: () => false,\r\n  [addContactError]: () => false,\r\n\r\n  [deleteContactRequest]: () => true,\r\n  [deleteContactSuccess]: () => false,\r\n  [deleteContactError]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [changeFilter]: (_, { payload }) => payload,\r\n});\r\nconst error = createReducer(false, {\r\n  [fetchContactRequest]: () => '',\r\n  [fetchContactSuccess]: () => '',\r\n  [fetchContactError]: (_, { payload }) => payload,\r\n\r\n  [addContactRequest]: () => '',\r\n  [addContactSuccess]: () => '',\r\n  [addContactError]: (_, { payload }) => payload,\r\n\r\n  [deleteContactRequest]: () => '',\r\n  [deleteContactSuccess]: () => '',\r\n  [deleteContactError]: (_, { payload }) => payload,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  loading,\r\n  error,\r\n});\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport phonebookReducer from './phonebook/phonebook-reducer';\r\n\r\nimport { authReducer } from './auth';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n  // logger,\r\n];\r\n\r\nconst contactsPersistConfig = {\r\n  key: 'contact',\r\n  storage,\r\n  blacklist: ['filter'],\r\n};\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: persistReducer(contactsPersistConfig, phonebookReducer),\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/store';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport Loader from 'components/Loader';\n\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={<Loader />} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2qYWu\",\"avatar\":\"UserMenu_avatar__2usWP\",\"name\":\"UserMenu_name__37LHs\",\"button\":\"UserMenu_button__2ZQkU\",\"label\":\"UserMenu_label__2gGc0\",\"exit\":\"UserMenu_exit__1D3Iq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__FUt1n\",\"activeLink\":\"Navigation_activeLink__2PbJl Navigation_link__FUt1n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNavigation_link__1CCS5\",\"activeLink\":\"AuthNavigation_activeLink__1eEtT AuthNavigation_link__1CCS5\"};","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nconst onLoader = () => {\r\n  // console.log('state', state.auth.user);\r\n  return (\r\n    <Loader\r\n      className=\"loader\"\r\n      type=\"Audio\"\r\n      color=\"#464646\"\r\n      height={40}\r\n      width={40}\r\n      ы\r\n      timeout={3000} //3 secs\r\n    />\r\n  );\r\n};\r\n\r\nexport default onLoader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__1m2ZR\"};","import { createAction } from '@reduxjs/toolkit';\r\n\r\n//pending\r\nexport const fetchContactRequest = createAction(\r\n  'phonebook/fetchPhonebookRequest',\r\n);\r\n//fulfilled\r\nexport const fetchContactSuccess = createAction(\r\n  'phonebook/fetchPhonebookSuccess',\r\n);\r\n//rejected\r\nexport const fetchContactError = createAction('phonebook/fetchPhonebookError');\r\n\r\nexport const addContactRequest = createAction('contacts/addContactRequest');\r\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\r\nexport const addContactError = createAction('contacts/addContactError');\r\n\r\nexport const deleteContactRequest = createAction(\r\n  'contact/deleteContactRequest',\r\n);\r\nexport const deleteContactSuccess = createAction(\r\n  'contact/deleteContactSuccess',\r\n);\r\nexport const deleteContactError = createAction('contacts/deleteContactError');\r\n\r\nexport const changeFilter = createAction('phonebook/ChangeFilter');\r\n"],"sourceRoot":""}